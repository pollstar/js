<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic Chart with 10-Second Window</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <canvas id="myChart" width="400" height="200"></canvas>
    <script>
        // Время старта (начало отсчета)
        const startTime = Date.now();

        // Создаем график с Chart.js
        const ctx = document.getElementById('myChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [], // временные метки (в секундах от начала)
                datasets: [{
                    label: 'Simulated Real-Time Data',
                    data: [],
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 2,
                    fill: false
                }]
            },
            options: {
                animation: false, // Отключаем анимацию для более быстрого обновления
                scales: {
                    x: {
                        type: 'linear',
                        title: { display: true, text: 'Seconds from Start' },
                        min: 0,
                        max: 10 // Показываем последние 10 секунд
                    },
                    y: { beginAtZero: true }
                }
            }
        });

        // Функция для добавления случайных данных на график
        function addData() {
            const timestamp = ((Date.now() - startTime) / 1000).toFixed(1); // секунды от начала
            const value = Math.floor(Math.random() * 100); // Случайное значение от 0 до 100

            // Добавляем данные на график
            myChart.data.labels.push(timestamp);
            myChart.data.datasets[0].data.push(value);

            // Оставляем последние 100 данных для отображения (10 секунд)
            if (myChart.data.labels.length > 100) {
                myChart.data.labels.shift();
                myChart.data.datasets[0].data.shift();
            }

            // Обновляем отображение по оси x для последних 10 секунд
            const currentTime = parseFloat(timestamp);
            myChart.options.scales.x.min = Math.max(0, currentTime - 10);
            myChart.options.scales.x.max = currentTime;

            // Обновляем график
            myChart.update();
        }

        // Генерируем данные каждые 0.1 секунды
        setInterval(addData, 100);
    </script>
</body>
</html>
